@startuml
skinparam packageStyle rectangle
skinparam shadowing false
skinparam linetype polyline
skinparam classAttributeIconSize 0

class User {
    - name: String
    - emailAddress: String
    - phoneNumber: String
    - password: String
    - role: String
    + User(...)
}

class Item {
    - designation: String
    - condition: String
    - image
    + Item(...)
}

class ItemDto {
    - designation: String
    - categoryName: String
    - condition: String
    - image
    + ItemDto(...)
}

class Category {
    - id: String
    - designation: String
    + Category(...)
}

class AdvertisementDto {
    - designation: String
    - address: String
    - itemDto: ItemDto
    + AdvertisementDto(...)
}

class Advertisement {
    - designation: String
    - initialDate: Date
    - finalDate: Date
    - address: String
    + Advertisement(...)
}

enum AdvertisementStatus {
}

interface CategoryRepository {
    + getCategoryById(id: Long)
}
interface AdvertisementRepository {
    + save(advertisement: Advertisement)
    + findById(id: Long)
}
interface ItemRepository {
    + save(item: Item)
    + findById(id: Long)
}

class AdvertisementMapper {
    + toEntity(dto: AdvertisementDto): Advertisement
    + toDto(advertisement: Advertisement): AdvertisementDto
}

class AdvertisementService {
    + Advertisement(dto: AdvertisementDto)
    - validateItem(itemId: Long)
}

class AdvertisementController {
    + AdvertisementController(service: AdvertisementService)
    + Advertisement(dto: AdvertisementDto)
}

class AdvertisementUI

' --- Relacionamentos ---
AdvertisementUI .> AdvertisementController

AdvertisementController ..> AdvertisementService : service

AdvertisementService .> AdvertisementMapper
AdvertisementService ..> AdvertisementRepository
AdvertisementService ..> CategoryRepository
AdvertisementService ..> ItemRepository

ItemRepository "1" -> "0..*" Item
CategoryRepository "1" --> "0..*" Category
AdvertisementRepository "1" --> "0..*" Advertisement

User -> AdvertisementUI : requests to create

Advertisement "1" --> "1" AdvertisementStatus
Advertisement "1" --> "1" Item : contains
AdvertisementMapper ..> AdvertisementDto
AdvertisementMapper ..> Advertisement

AdvertisementDto "1" --> "1" ItemDto
note bottom of AdvertisementStatus
Active, pending, closed
endnote

@enduml